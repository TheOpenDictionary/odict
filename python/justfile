VENV_PATH := ".env"

deps:
  python3 -m venv {{VENV_PATH}}
  {{VENV_PATH}}/bin/pip install -U pip setuptools
  {{VENV_PATH}}/bin/pip install poetry

poetry +args="":
  {{VENV_PATH}}/bin/poetry {{args}}

install: update
	just poetry install 

test: install && clean
  just ../build
  RUNTIME_ENV=test just poetry run pytest ./theopendictionary

clean:
  rm -rf *.odict ../**/*.odict .pytest_cache **/__pycache__ **/*.pyc

update:
	just poetry update 

build: install
	just poetry build

publish: build
	poetry publish
