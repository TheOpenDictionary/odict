
# ---------------------------------------------------------------------------- #
#                                    Schema                                    #
# ---------------------------------------------------------------------------- #

schema:
	flatc -g --gen-onefile --go-namespace odict -o ./go schema.fbs

# ---------------------------------------------------------------------------- #
#                                    Library                                   #
# ---------------------------------------------------------------------------- #

OUTPUT=build

test:
	go test ./go
	
# ---------------------------------------------------------------------------- #
#                                      CLI                                     #
# ---------------------------------------------------------------------------- #

cli:
	go build -o ${OUTPUT} .

# ---------------------------------------------------------------------------- #
#                                    Python                                    #
# ---------------------------------------------------------------------------- #

python:
	poetry build

pytest: python
	RUNTIME_ENV=test cd python && poetry run pytest ./odict && cd ..

clean:
	rm -rf setup.py dist build schema/*.go